# Руководство по использованию Ngrok для фронтенда

Этот документ поможет вам и вашему фронтенд-разработчику настроить общий доступ к Swagger UI и API через ngrok.

## 1. Установка Ngrok
Если у вас еще не установлен ngrok, скачайте его с [официального сайта](https://ngrok.com/download).

## 2. Запуск проекта
Вы можете запустить проект локально или через Docker.

### Вариант А: Через Docker (Рекомендуется)
Так как мы добавили новые зависимости, нужно пересобрать контейнеры:
```bash
docker-compose down
docker-compose up --build
```

### Вариант Б: Локально (без Docker)
Запустите Django сервер:
```bash
python manage.py runserver
```

## 3. Запуск туннеля
В новом терминале запустите ngrok:
```bash
ngrok http 8000
```
Вы получите URL вида: `https://abcd-123.ngrok-free.app`

## 3. Настройка Django (CSRF)
Django требует, чтобы домен ngrok был в списке доверенных для работы POST-запросов (через Swagger).
Я уже добавил поддержку переменной окружения в `settings.py`.

Укажите ваш ngrok URL в файле `.env`:
```env
CSRF_TRUSTED_ORIGINS=https://abcd-123.ngrok-free.app
```
*(Замените `abcd-123.ngrok-free.app` на ваш реальный адрес из терминала ngrok)*

## 4. Что передать фронтендщику
Поделитесь с ним следующими ссылками:

*   **Swagger UI (Документация API):**
    `https://<ваша-ссылка-ngrok>/api/schema/swagger-ui/`
*   **Админ панель (Django Admin):**
    `https://<ваша-ссылка-ngrok>/admin/`
    *   **Логин:** `Admin`
    *   **Пароль:** `admin` (я только что сбросил его для уверенности)
*   **Базовый URL для API:**
    `https://<ваша-ссылка-ngrok>/api/`

## 5. Проверка Бота
Если вы хотите проверить работу бота через Swagger:
1. Откройте Swagger UI по ссылке выше.
2. Найдите эндпоинты, связанные с ботом (например, в разделе `users`).
3. Используйте кнопку **"Try it out"**.

## Дополнительно: CORS
В проекте настроен `django-cors-headers`, который разрешает запросы со всех доменов (`CORS_ALLOW_ALL_ORIGINS = True`), что идеально подходит для этапа тестирования фронтенда.
