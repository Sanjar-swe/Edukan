# План разработки проекта "Online Dukan API"

Этот документ содержит пошаговое руководство по разработке RESTful API для интернет-магазина.

---

## Этап 1: Подготовка окружения и создание проекта [ВЫПОЛНЕНО: 11:10]
- Виртуальное окружение активировано.
- Django и DRF установлены.
- Приложения `api`, `shop`, `users` созданы.

На этом этапе мы подготовим фундамент для нашего приложения.

1. **Создание и активация виртуального окружения**
   ```bash
   python -m venv venv
   source venv/bin/activate  # Для Linux/macOS
   ```
   *Почему:* Виртуальное окружение изолирует зависимости проекта от системных библиотек, предотвращая конфликты версий.

2. **Установка необходимых библиотек**
   ```bash
   pip install django djangorestframework django-filter djangorestframework-simplejwt psycopg2-binary drf-yasg
   ```
   *Почему:*
   - `django`: Основной фреймворк.
   - `djangorestframework`: Инструментарий для создания API.
   - `django-filter`: Для фильтрации товаров.
   - `simplejwt`: Для аутентификации через JWT.
   - `psycopg2-binary`: Драйвер для подключения к PostgreSQL.
   - `drf-yasg`: Для автоматической генерации документации Swagger.

3. **Создание проекта и приложения**
   ```bash
   django-admin startproject core .
   python manage.py startapp api
   python manage.py startapp shop
   python manage.py startapp users
   ```
   *Почему:* Разделение на логические приложения (`users` для аккаунтов, `shop` для логики товаров и заказов) делает код более чистым и масштабируемым.

---

## Этап 2: Настройка базы данных и конфигурация проекта [ВЫПОЛНЕНО: 11:30]
- PostgreSQL настроен в `settings.py`.
- JWT настроен.
- Локализация выполнена (LANGUAGE_CODE = 'kk', TIME_ZONE = 'Asia/Tashkent').

1. **Настройка PostgreSQL в `settings.py`**
   *Необходимо заменить стандартный SQLite на PostgreSQL для соответствия ТЗ.*
   ```python
   DATABASES = {
       'default': {
           'ENGINE': 'django.db.backends.postgresql',
           'NAME': 'online_dukan_db',
           'USER': 'your_user',
           'PASSWORD': 'your_password',
           'HOST': 'localhost',
           'PORT': '5432',
       }
   }
   ```

2. **Подключение JWT аутентификации**
   *Добавьте `REST_FRAMEWORK` настройки в `settings.py`.*
   *Почему:* JWT обеспечивает безопасный обмен данными между клиентом и сервером без хранения состояния сессии на сервере.

---

## Этап 3: Разработка моделей данных (Models) [ВЫПОЛНЕНО: 12:40]
- Модель `User` с кастомными полями (`users/models.py`).
- Модели `Category`, `Product`, `Cart`, `Order` (`shop/models.py`).
- Все модели переведены на каракалпакский язык (`verbose_name`).

1. **Пользовательская модель в `users/models.py`**
   *Создаем наследника `AbstractUser`.*
   *Почему:* Это позволяет легко добавлять свои поля (телефон, адрес) к стандартной модели пользователя Django.

2. **Категории и Товары в `shop/models.py`**
   - Реализуем связи `ForeignKey` для категорий.
   - Используем `slug` для красивых URL.
   *Почему:* База данных должна быть нормализована для эффективного хранения и поиска.

3. **Корзина и Заказы в `shop/models.py`**
   - Модели `Cart` и `CartItem`.
   - Модель `Order` со статусами и адресом доставки.

---

## Этап 4: Создание сериализаторов (Serializers)

1. **В файлах `api/serializers.py` (или внутри приложений)**
   *Реализуем `ModelSerializer` для каждой модели.*
   *Почему:* Сериализаторы конвертируют объекты Django в JSON и обратно, а также обеспечивают валидацию входящих данных.

---

## Этап 5: Логика представлений (Views & Endpoints)

1. **Регистрация и Авторизация**
   - Используем встроенные в SimpleJWT представления для получения токенов.
2. **Продукты (List & Detail)**
   - Настройка пагинации (`PageNumberPagination`).
   - Настройка фильтрации через `django-filter`.
3. **Корзина (Shopping Cart)**
   - Реализация методов POST (добавить), GET (посмотреть), DELETE (удалить).
4. **Оформление заказа (Checkout)**
   - Создание специального View, который переносит данные из корзины в заказ и уменьшает поле `stock` у товаров.

---

## Этап 6: Документация API

1. **Настройка Swagger**
   - Добавление URL-путей для `/swagger/` и `/redoc/`.
   *Почему:* Хорошая документация позволяет фронтенд-разработчикам или другим потребителям API быстро понять, как с ним работать.

---

## Этап 7: Бонусные задачи (Дополнительно)

1. **Docker**
   - Создание `Dockerfile` и `docker-compose.yml`.
   *Почему:* Контейнеризация гарантирует, что проект будет работать одинаково на любой машине.
2. **Django Signals**
   - Реализация отправки Email при регистрации.
3. **Отзывы и Рейтинги**
   - Создание модели `Review` и соответствующих API-интерфейсов.

---

## Этап 8: Деплой и сдача проекта

1. **Подготовка README.md**
2. **Загрузка на GitHub**
   ```bash
   git init
   git add .
   git commit -m "Первоначальный коммит: структура проекта и план"
   git remote add origin https://github.com/username/repository.git
   git push -u origin main
   ```
